# 类
类：定义自己的数据结构，来表示问题中的各种概念。
类的基本思想是数据抽象和封装。
    - 数据抽象：将数据类型抽象为对外的接口和对内的实现，接口是指用户可以使用的各种函数，实现指的是内部的数据，内部函数，以及对外接口函数体。
    - 封装：将接口与实现分离开来，隐藏实现，暴露接口。
    
类的设计者负责考虑实现，类的使用者只需要考虑接口的使用方法。

## 7.1 定义抽象数据类型

### 7.1.1 设计Sales_data类
    讲了之前章节中出现过的设计场景，说明本节使用的类需要哪些接口和如何使用。
### 7.1.2 定义改进的Sales_data类
    成员函数必须在类内声明，但定义既可以在类内也可以在类外。定义在类内的函数是隐式的inline函数。
    在类内部使用类的成员时，隐式地使用了this指针。this指针是常量指针，指向调用方法的对象。this指针中保存的地址是在调用方法时由编译器传入的，传入的是对象的地址。
        *常量指针即顶层指针，指针内存放的地址不能改变。
    常量成员函数，声明时在参数列表后加const，这个const表示传入的this指针为指向常量的常量指针。常量对象、指向常量对象的指针和引用只能调用常量成员函数。
    编译器编译类时，先编译成员的声明，然后才编译成员函数体。所以可以定义函数的时候可以函数体内可以使用后面定义的成员。
### 7.1.3 定义类相关的非成员函数
    一般来说，如果非类成员函数是类接口的组成部分，应该将这些函数与类声明放在同一头文件内。
    io类不能被拷贝，只能通过引用来传递。
    一般来说，拷贝类的对象一般是拷贝类的数据成员。
### 7.1.4 构造函数
    构造函数：初始化对象
    默认构造函数可以用=default声明。
    构造函数不能是常成员函数。不同构造函数必须在参数数量或参数类型上有所区别。
    未提供构造函数时，编译器会创建默认构造函数。默认构造函数初始化对象的规则是：
        如果类内有初始值，则使用类内初始值初始化。
        如果没有，进行默认初始化。
        
## 7.2 访问控制与封装
1. public与private：
    public后的成员用户可以访问，用来暴露接口
    private后的成员可以被类的成员函数访问，不能被用户访问
2. class与struct的区别
    class默认的成员为private，struct默认成员为public
### 7.2.1 友元
    当需要类外的代码访问类的private变量时，使用友元。由于函数需要在类内部进行声明，声明时在前面加friend
    封装优点:
    - 低耦合，调整类的实现时，不需要修改用户的代码
    - 防止用户随意修改类的数据
    友元函数声明：在类内声明只表示有访问私有成员的权限，不算真正意义的函数声明，因此在类外还需要对友元函数作正式声明。友元函数的声明一般与类声明放在同一个头文件内。
## 7.3 类的其它特性
### 7.3.1 类成员再探
- 定义类型成员
    `typedef std::string::size_type pos;`需要类外的函数使用的类型成员要声明为public，类型成员必须先声明后使用。
- 令成员作为内联函数
    函数声明或定义前加inline修饰符，既可以在类内声明，也可以在类外，建议在类外函数定义前声明。
- 重载成员函数
    函数参数类型和/或个数必须不同
- 可变数据成员
    mutable可变数据成员，永远可变的数据成员，即使是const对象，他的mutable成员也是可改变的，const成员函数可以改变mutable成员变量的值
- 类数据成员的初始值
    类内初始值必须使用=或{}初始化
### 7.3.2 返回*this的成员函数
    返回*this的成员函数可以完成一系列嵌套的动作： `myScreen.set().move(4,0)`
    const成员函数返回*this时，由于传入的this指针为指向常量的指针，返回的对象是一个常量
    
